<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Security Dashboard - LinkBuster</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.css" rel="stylesheet">
  <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --success-gradient: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
      --warning-gradient: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
      --danger-gradient: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
      --ai-gradient: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      --human-gradient: linear-gradient(135deg, #1dd1a1 0%, #10ac84 100%);
      --dark-bg: #0f0f23;
      --card-bg: #1a1a2e;
      --card-hover: #16213e;
      --text-light: #ffffff;
      --text-muted: #8b8b9e;
      --accent-blue: #00d4ff;
      --accent-purple: #a855f7;
    }

    .dashboard-body {
      background: var(--dark-bg);
      color: var(--text-light);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-image: 
        radial-gradient(circle at 15% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 85% 30%, rgba(255, 119, 198, 0.05) 0%, transparent 50%);
    }

    .sidebar-nav {
      background: linear-gradient(180deg, var(--card-bg) 0%, #0f3460 100%);
      border-radius: 20px;
      padding: 25px 15px;
      height: fit-content;
      position: sticky;
      top: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .sidebar-nav .nav-link {
      color: var(--text-muted);
      padding: 15px 20px;
      border-radius: 15px;
      margin-bottom: 8px;
      transition: all 0.4s ease;
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .sidebar-nav .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--primary-gradient);
      transition: left 0.4s ease;
      z-index: -1;
    }

    .sidebar-nav .nav-link:hover,
    .sidebar-nav .nav-link.active {
      color: white;
      transform: translateX(8px);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .sidebar-nav .nav-link.active::before {
      left: 0;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--card-bg) 0%, #16213e 100%);
      border-radius: 20px;
      padding: 25px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-gradient);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .stat-card:hover::before {
      transform: scaleX(1);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.4);
      background: var(--card-hover);
    }

    .stat-icon {
      width: 70px;
      height: 70px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 20px;
      font-size: 28px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
    }

    .dashboard-card {
      background: linear-gradient(135deg, var(--card-bg) 0%, #16213e 100%);
      border-radius: 20px;
      margin-bottom: 25px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }

    .dashboard-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.3);
    }

    .card-header {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.1) 0%, transparent 100%);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 20px 20px 0 0 !important;
    }

    .card-header h4 {
      margin: 0;
      font-weight: 700;
      background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .threat-globe {
      height: 300px;
      background: linear-gradient(135deg, #0c0c1d 0%, #1a1a2e 100%);
      border-radius: 15px;
      position: relative;
      overflow: hidden;
    }

    .globe-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .threat-pulse {
      position: absolute;
      width: 12px;
      height: 12px;
      background: #ff4757;
      border-radius: 50%;
      animation: threatPulse 2s infinite;
    }

    @keyframes threatPulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
      70% { transform: scale(1.5); box-shadow: 0 0 0 15px rgba(255, 71, 87, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); }
    }

    .risk-meter {
      background: rgba(255,255,255,0.05);
      border-radius: 15px;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    .risk-meter::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.02) 50%, transparent 70%);
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .ai-insights {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .table-enhanced {
      background: rgba(255,255,255,0.02);
      border-radius: 15px;
      overflow: hidden;
    }

    .table-enhanced th {
      background: rgba(102, 126, 234, 0.2);
      border: none;
      padding: 15px;
      font-weight: 600;
    }

    .table-enhanced td {
      padding: 15px;
      border-color: rgba(255,255,255,0.1);
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-gradient);
      border-radius: 10px;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .floating {
      animation: float 6s ease-in-out infinite;
    }

    @media (max-width: 768px) {
      .sidebar-nav {
        margin-bottom: 20px;
        position: relative;
        top: 0;
      }
      
      .stat-card {
        margin-bottom: 15px;
      }
    }

    .chart-container {
      background: rgba(255,255,255,0.02);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .threat-level {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .threat-low { background: var(--success-gradient); }
    .threat-medium { background: var(--warning-gradient); }
    .threat-high { background: var(--danger-gradient); }
    .threat-critical { 
      background: var(--danger-gradient);
      animation: pulse 2s infinite;
    }

    /* Combined Map Styles */
    .combined-map-point {
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      animation: mapPulse 3s infinite;
      transform: translate(-50%, -50%);
    }

    @keyframes mapPulse {
      0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      50% { transform: translate(-50%, -50%) scale(2); opacity: 0.7; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    .heat-1 { background: #00b894; animation-delay: 0s; }
    .heat-2 { background: #f7971e; animation-delay: 0.3s; }
    .heat-3 { background: #ff416c; animation-delay: 0.6s; }

    .india-highlight {
      position: absolute;
      top: 35%;
      left: 57%;
      width: 80px;
      height: 100px;
      border: 2px solid #00d4ff;
      border-radius: 8px;
      animation: highlightPulse 2s infinite;
    }

    @keyframes highlightPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(0, 212, 255, 0.7); }
      50% { box-shadow: 0 0 0 10px rgba(0, 212, 255, 0); }
    }

    /* AI Detector Styles */
    .container-custom {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .glass-card {
      background: linear-gradient(135deg, rgba(26, 26, 58, 0.9), rgba(21, 21, 43, 0.95));
      backdrop-filter: blur(20px);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      overflow: hidden;
    }

    .glass-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 30px 60px rgba(0,0,0,0.5);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .upload-area {
      border: 3px dashed rgba(255,255,255,0.2);
      border-radius: 20px;
      padding: 4rem 2rem;
      text-align: center;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      background: rgba(255,255,255,0.03);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .upload-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
      transition: left 0.6s ease;
    }

    .upload-area:hover::before {
      left: 100%;
    }

    .upload-area:hover {
      border-color: var(--accent-blue);
      background: rgba(0, 212, 255, 0.05);
      transform: scale(1.02);
    }

    .upload-area.dragover {
      border-color: var(--accent-purple);
      background: rgba(168, 85, 247, 0.1);
      transform: scale(1.05);
    }

    .result-display {
      background: linear-gradient(135deg, rgba(30, 30, 58, 0.9), rgba(26, 26, 46, 0.95));
      border-radius: 20px;
      padding: 2.5rem;
      border-left: 4px solid var(--accent-blue);
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .confidence-meter {
      height: 24px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      overflow: hidden;
      margin: 1.5rem 0;
      position: relative;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
    }

    .confidence-fill {
      height: 100%;
      border-radius: 12px;
      transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
      overflow: hidden;
    }

    .confidence-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }

    .detection-indicator {
      display: inline-block;
      padding: 1.2rem 2.5rem;
      border-radius: 50px;
      font-weight: 800;
      font-size: 1.3rem;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      overflow: hidden;
    }

    .detection-indicator::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }

    .detection-indicator:hover::before {
      left: 100%;
    }

    .ai-detected {
      background: var(--ai-gradient);
      animation: pulse-glow 3s ease-in-out infinite;
    }

    .human-detected {
      background: var(--human-gradient);
      animation: pulse-glow 3s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(0,0,0,0.4), 0 0 30px rgba(255,255,255,0.1);
      }
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .feature-item {
      background: rgba(255,255,255,0.05);
      padding: 1.8rem;
      border-radius: 16px;
      text-align: center;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .feature-item:hover {
      transform: translateY(-5px);
      background: rgba(255,255,255,0.08);
      border-color: rgba(255,255,255,0.2);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .feature-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 2rem;
      background: rgba(255,255,255,0.1);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .feature-item:hover .feature-icon {
      transform: scale(1.1) rotate(5deg);
      background: rgba(255,255,255,0.15);
    }

    .analysis-details {
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      padding: 2rem;
      margin-top: 2rem;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .detail-item:last-child {
      border-bottom: none;
    }

    .detail-value {
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      background: rgba(255,255,255,0.1);
    }

    .btn-primary {
      background: var(--primary-gradient);
      border: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      overflow: hidden;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
    }

    .file-info {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 1.5rem;
      border-left: 4px solid var(--accent-blue);
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      h2 { font-size: 2rem; }
      
      .upload-area {
        padding: 2.5rem 1.5rem;
      }
      
      .feature-grid {
        grid-template-columns: 1fr;
      }
      
      .container-custom {
        padding: 0 1rem;
      }
    }

    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .loading-dots {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }

    .loading-dots div {
      position: absolute;
      top: 33px;
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: var(--accent-blue);
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
    }

    .loading-dots div:nth-child(1) {
      left: 8px;
      animation: loading-dots1 0.6s infinite;
    }

    .loading-dots div:nth-child(2) {
      left: 8px;
      animation: loading-dots2 0.6s infinite;
    }

    .loading-dots div:nth-child(3) {
      left: 32px;
      animation: loading-dots2 0.6s infinite;
    }

    .loading-dots div:nth-child(4) {
      left: 56px;
      animation: loading-dots3 0.6s infinite;
    }

    @keyframes loading-dots1 {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }

    @keyframes loading-dots3 {
      0% { transform: scale(1); }
      100% { transform: scale(0); }
    }

    @keyframes loading-dots2 {
      0% { transform: translate(0, 0); }
      100% { transform: translate(24px, 0); }
    }

    /* Page-specific styles */
    .ai-detector-body {
      background: #0a0a14;
      color: #f8f9fa;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(120, 119, 198, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(255, 119, 198, 0.1) 0%, transparent 40%);
    }

    .ai-detector-navbar {
      background: rgba(21, 21, 43, 0.95) !important;
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 1.2rem 0;
    }
  </style>
</head>
<body class="dashboard-body" id="main-body">
  <!-- Dashboard Content -->
  <div id="dashboard-content">
    <nav class="navbar navbar-expand-lg navbar-dark" style="background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(20px);">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <i class="fas fa-robot me-2 floating" style="color: var(--accent-blue);"></i>
          <strong style="background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">LinkBuster AI</strong>
        </a>
        
        <div class="navbar-nav ms-auto">
          <div class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-user-shield me-1" style="color: var(--accent-blue);"></i> 
              <span style="background: linear-gradient(45deg, #fff, var(--accent-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{{ session['user'] }}</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
              <li><a class="dropdown-item" href="#"><i class="fas fa-users me-2"></i>Team</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-lg-2">
          <div class="sidebar-nav">
            <div class="nav flex-column">
              <a class="nav-link active" href="#overview">
                <i class="fas fa-tachometer-alt me-2"></i>Overview
              </a>
              <a class="nav-link" href="#scanner">
                <i class="fas fa-search me-2"></i>AI Scanner
              </a>
              <a class="nav-link" href="#" id="ai-human-detector-link">
                <i class="fas fa-robot me-2"></i>AI vs Human Detector
              </a>
              <a class="nav-link" href="#analytics">
                <i class="fas fa-chart-network me-2"></i>Threat Analytics
              </a>
              <a class="nav-link" href="#global-map">
                <i class="fas fa-globe-americas me-2"></i>Global Threat Map
              </a>
              <a class="nav-link" href="#reports">
                <i class="fas fa-file-alt me-2"></i>Reports
              </a>
            </div>
          </div>
        </div>

        <div class="col-lg-10">
          <div class="row quick-stats">
            <div class="col-xl-3 col-md-6">
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(0, 212, 255, 0.1); color: var(--accent-blue);">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="stat-info">
                  <h3 id="protectedCount">0</h3>
                  <span>Protected URLs</span>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(0, 184, 148, 0.1); color: #00b894;">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                  <h3 id="safeCount">0</h3>
                  <span>Safe Detections</span>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(247, 151, 30, 0.1); color: #f7971e;">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-info">
                  <h3 id="suspiciousCount">0</h3>
                  <span>Suspicious URLs</span>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(255, 65, 108, 0.1); color: #ff416c;">
                  <i class="fas fa-skull-crossbones"></i>
                </div>
                <div class="stat-info">
                  <h3 id="threatsBlocked">0</h3>
                  <span>Threats Blocked</span>
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-4" id="scanner">
            <div class="col-12">
              <div class="dashboard-card">
                <div class="card-header">
                  <h4><i class="fas fa-search me-2"></i>Advanced AI Threat Scanner</h4>
                  <div class="card-actions">
                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#batchScanModal">
                      <i class="fas fa-layer-group me-1"></i>Batch Scan
                    </button>
                    <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#scheduleScanModal">
                      <i class="fas fa-clock me-1"></i>Schedule
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <form method="POST" action="/ai-scan" id="scanForm">
                        <div class="scan-input-group">
                          <input type="text" name="url" class="form-control form-control-lg" 
                                placeholder="Enter URL for advanced AI threat analysis..." required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white;">
                          <button type="submit" class="btn btn-primary btn-lg" style="background: var(--primary-gradient); border: none;">
                            <i class="fas fa-robot me-2"></i>AI Scan
                          </button>
                        </div>
                      </form>
                      <div class="quick-urls mt-3">
                        <small class="text-muted">Quick test: </small>
                        <button class="btn btn-sm btn-outline-success quick-scan" data-url="https://www.google.com">Safe URL</button>
                        <button class="btn btn-sm btn-outline-warning quick-scan" data-url="https://suspicious-site.com">Suspicious</button>
                        <button class="btn btn-sm btn-outline-danger quick-scan" data-url="http://malware.testing.google.test">Malicious</button>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="scan-options">
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="deepScan" checked>
                          <label class="form-check-label" for="deepScan">Deep AI Analysis</label>
                        </div>
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="threatIntel" checked>
                          <label class="form-check-label" for="threatIntel">Threat Intelligence</label>
                        </div>
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="behavioralAnalysis">
                          <label class="form-check-label" for="behavioralAnalysis">Behavioral Analysis</label>
                        </div>
                      </div>
                    </div>
                  </div>

                  {% if session.get('scan_result') %}
                  <div id="scanResults" class="mt-4">
                    <div class="ai-analysis-result" style="background: rgba(255,255,255,0.03); border-radius: 15px; padding: 25px;">
                      <div class="row">
                        <div class="col-md-6">
                          <h5 style="background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            🤖 AI Threat Analysis Complete
                          </h5>
                          <div class="risk-meter mt-3">
                            <div class="d-flex justify-content-between mb-2">
                              <span>Risk Level</span>
                              <span class="threat-level 
                                {% if session['scan_result']['score'] >= 80 %}threat-critical
                                {% elif session['scan_result']['score'] >= 60 %}threat-high
                                {% elif session['scan_result']['score'] >= 40 %}threat-medium
                                {% else %}threat-low{% endif %}">
                                {{ session['scan_result']['status'] }}
                              </span>
                            </div>
                            <div class="risk-meter-bar">
                              <div class="progress" style="height: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                                <div class="progress-bar" 
                                     style="width: {{ session['scan_result']['score'] }}%; 
                                            background: {% if session['scan_result']['score'] >= 80 %}var(--danger-gradient)
                                                       {% elif session['scan_result']['score'] >= 60 %}var(--warning-gradient)
                                                       {% elif session['scan_result']['score'] >= 40 %}#f7971e
                                                       {% else %}var(--success-gradient){% endif %};">
                                  {{ session['scan_result']['score'] }}%
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="ai-insights">
                            <h6>🦠 Threat Indicators</h6>
                            <div class="threat-grid">
                              <div class="threat-item {% if session['scan_result']['score'] >= 60 %}active{% endif %}">
                                <i class="fas fa-fish"></i> Phishing
                              </div>
                              <div class="threat-item {% if session['scan_result']['score'] >= 80 %}active{% endif %}">
                                <i class="fas fa-virus"></i> Malware
                              </div>
                              <div class="threat-item {% if session['scan_result']['score'] >= 40 %}active{% endif %}">
                                <i class="fas fa-exclamation-triangle"></i> Suspicious
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-4">
            <div class="col-md-8">
              <div class="dashboard-card">
                <div class="card-header">
                  <h4><i class="fas fa-chart-network me-2"></i>Real-time Threat Analytics</h4>
                </div>
                <div class="card-body">
                  <div class="chart-container">
                    <div id="threatTrendChart" style="min-height: 300px;"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <div class="dashboard-card">
                <div class="card-header">
                  <h4><i class="fas fa-globe-asia me-2"></i>Global Threat Heat Map</h4>
                </div>
                <div class="card-body">
                  <div class="threat-globe">
                    <div class="globe-container" id="combinedThreatMap">
                      <div class="india-highlight"></div>
                    </div>
                    <div class="heatmap-legend" style="position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.8); padding: 10px; border-radius: 8px;">
                      <div class="legend-item"><div class="legend-color" style="background: #00b894; width: 20px; height: 10px; display: inline-block; margin-right: 8px;"></div> Low</div>
                      <div class="legend-item"><div class="legend-color" style="background: #f7971e; width: 20px; height: 10px; display: inline-block; margin-right: 8px;"></div> Medium</div>
                      <div class="legend-item"><div class="legend-color" style="background: #ff416c; width: 20px; height: 10px; display: inline-block; margin-right: 8px;"></div> High</div>
                    </div>
                  </div>
                  <div class="threat-stats mt-3">
                    <div class="row text-center">
                      <div class="col-6">
                        <div class="threat-stat">
                          <span class="value text-warning" id="asiaThreats">1,024</span>
                          <span class="label">Asia Threats</span>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="threat-stat">
                          <span class="value text-danger" id="indiaThreats">347</span>
                          <span class="label">India Focus</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-4" id="threat-intel">
            <div class="col-12">
              <div class="dashboard-card">
                <div class="card-header">
                  <h4><i class="fas fa-brain me-2"></i>AI Threat Intelligence Feed</h4>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="intel-feed">
                        <h6>🔄 Live Threat Feed</h6>
                        <div class="feed-items" id="threatFeed" style="max-height: 300px; overflow-y: auto;">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="predictive-analytics">
                        <h6>🔮 Predictive Analysis</h6>
                        <div id="predictiveChart" style="min-height: 250px;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-4">
            <div class="col-12">
              <div class="dashboard-card">
                <div class="card-header">
                  <h4><i class="fas fa-history me-2"></i>Scan History & Analytics</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-enhanced table-hover">
                      <thead>
                        <tr>
                          <th>URL</th>
                          <th>Risk Score</th>
                          <th>Threat Level</th>
                          <th>Time</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for item in history %}
                        <tr>
                          <td class="url-cell">
                            <i class="fas fa-link me-2 text-info"></i>
                            <span class="url-text" title="{{ item[0] }}">{{ item[0][:50] }}...</span>
                          </td>
                          <td>
                            <div class="progress" style="height: 10px; width: 80px; background: rgba(255,255,255,0.1);">
                              <div class="progress-bar" 
                                   style="width: {{ item[1] }}%; 
                                          background: {% if item[1] >= 80 %}var(--danger-gradient)
                                                     {% elif item[1] >= 60 %}var(--warning-gradient)
                                                     {% elif item[1] >= 40 %}#f7971e
                                                     {% else %}var(--success-gradient){% endif %};">
                              </div>
                            </div>
                            <small>{{ item[1] }}%</small>
                          </td>
                          <td>
                            <span class="threat-level 
                              {% if item[1] >= 80 %}threat-critical
                              {% elif item[1] >= 60 %}threat-high
                              {% elif item[1] >= 40 %}threat-medium
                              {% else %}threat-low{% endif %}">
                              {{ item[2] }}
                            </span>
                          </td>
                          <td><small class="text-muted">{{ item[3] }}</small></td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary rescan-btn" data-url="{{ item[0] }}" title="Rescan">
                              <i class="fas fa-redo"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info details-btn" data-url="{{ item[0] }}" title="Details">
                              <i class="fas fa-chart-bar"></i>
                            </button>
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Detector Content (Hidden by default) -->
  <div id="ai-detector-content" style="display: none;">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark ai-detector-navbar">
      <div class="container-custom">
        <a class="navbar-brand" href="#" id="back-to-dashboard">
          <i class="fas fa-robot me-2"></i>
          LinkBuster AI
        </a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link btn btn-outline-light" href="#" id="back-to-dashboard-btn">
            <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
          </a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container-custom mt-5">
      <div class="row justify-content-center">
        <div class="col-lg-11">
          <!-- Header Section -->
          <div class="text-center mb-6 fade-in">
            <h1 class="display-3 fw-bold mb-3" style="background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
              AI vs Human Content Detector
            </h1>
            <p class="lead fs-4 text-muted">Advanced neural network analysis powered by deep learning algorithms</p>
            <div class="mt-4">
              <span class="badge bg-primary fs-6 me-2">97.3% Accuracy</span>
              <span class="badge bg-success fs-6 me-2">Real-time Analysis</span>
              <span class="badge bg-info fs-6">Multi-format Support</span>
            </div>
          </div>

          <!-- Main Detector Card -->
          <div class="glass-card p-5 mb-5 fade-in">
            <div class="row align-items-stretch">
              <!-- Upload Section -->
              <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="upload-area h-100" id="uploadZone">
                  <i class="fas fa-cloud-upload-alt fa-5x mb-4" style="color: var(--accent-blue);"></i>
                  <h3 class="mb-3">Drag & Drop Files Here</h3>
                  <p class="text-muted fs-5 mb-4">Supports documents, images, code, and text files up to 100MB</p>
                  
                  <input type="file" id="fileInput" hidden accept=".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png,.py,.js,.html,.css,.cpp,.java">
                  <button class="btn btn-primary btn-lg px-5 py-3" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-folder-open me-3"></i>Choose Files
                  </button>
                  
                  <div class="mt-4">
                    <small class="text-muted">
                      <i class="fas fa-shield-alt me-2"></i>Your files are processed securely and never stored
                    </small>
                  </div>
                </div>
              </div>
              
              <!-- Results Section -->
              <div class="col-lg-6">
                <div class="result-display">
                  <h4 class="mb-4"><i class="fas fa-chart-bar me-3"></i>Analysis Results</h4>
                  
                  <!-- Initial State -->
                  <div id="resultContent" class="text-center py-5">
                    <i class="fas fa-microscope fa-4x mb-4 text-muted"></i>
                    <h5 class="text-muted">Ready for Analysis</h5>
                    <p class="text-muted">Upload a file to detect if it was created by AI or human</p>
                  </div>
                  
                  <!-- Analysis Results -->
                  <div id="analysisResults" style="display: none;">
                    <div class="text-center mb-5">
                      <div id="resultIndicator" class="detection-indicator mb-4">
                        <i class="fas fa-robot me-3"></i>AI Generated
                      </div>
                      
                      <div class="confidence-meter">
                        <div id="confidenceFill" class="confidence-fill" style="width: 0%"></div>
                      </div>
                      <div class="d-flex justify-content-between mt-2">
                        <small class="text-muted">Low Confidence</small>
                        <small class="text-muted">High Confidence</small>
                      </div>
                      <h5 class="mt-3">Confidence Level: <span id="confidenceValue" class="fw-bold">0%</span></h5>
                    </div>
                    
                    <!-- File Information -->
                    <div class="file-info">
                      <h6><i class="fas fa-file me-2"></i>File Information</h6>
                      <div class="row mt-3">
                        <div class="col-6">
                          <small class="text-muted">Name:</small>
                          <div id="fileName" class="fw-bold">-</div>
                        </div>
                        <div class="col-6">
                          <small class="text-muted">Size:</small>
                          <div id="fileSize" class="fw-bold">-</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Advanced Analysis Section -->
          <div id="advancedAnalysis" style="display: none;">
            <!-- Feature Analysis -->
            <div class="glass-card p-5 mb-4 fade-in">
              <h3 class="mb-4"><i class="fas fa-microscope me-3"></i>Advanced Feature Analysis</h3>
              <div class="feature-grid">
                <div class="feature-item">
                  <div class="feature-icon text-info">
                    <i class="fas fa-font"></i>
                  </div>
                  <h5>Text Patterns</h5>
                  <p class="text-muted">Analyzes writing style and linguistic patterns</p>
                  <div class="detail-value" id="textScore">-</div>
                </div>
                
                <div class="feature-item">
                  <div class="feature-icon text-warning">
                    <i class="fas fa-code"></i>
                  </div>
                  <h5>Code Structure</h5>
                  <p class="text-muted">Examines programming patterns and complexity</p>
                  <div class="detail-value" id="codeScore">-</div>
                </div>
                
                <div class="feature-item">
                  <div class="feature-icon text-success">
                    <i class="fas fa-image"></i>
                  </div>
                  <h5>Visual Analysis</h5>
                  <p class="text-muted">Detects AI-generated image artifacts</p>
                  <div class="detail-value" id="imageScore">-</div>
                </div>
              </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="glass-card p-5 fade-in">
              <h3 class="mb-4"><i class="fas fa-chart-pie me-3"></i>Detailed Analysis Breakdown</h3>
              <div class="analysis-details">
                <div class="detail-item">
                  <span>Perplexity Score</span>
                  <span class="detail-value" id="perplexityScore">-</span>
                </div>
                <div class="detail-item">
                  <span>Burstiness Analysis</span>
                  <span class="detail-value" id="burstinessScore">-</span>
                </div>
                <div class="detail-item">
                  <span>Semantic Coherence</span>
                  <span class="detail-value" id="coherenceScore">-</span>
                </div>
                <div class="detail-item">
                  <span>Pattern Consistency</span>
                  <span class="detail-value" id="patternScore">-</span>
                </div>
                <div class="detail-item">
                  <span>Originality Index</span>
                  <span class="detail-value" id="originalityScore">-</span>
                </div>
              </div>
            </div>
          </div>

          <!-- How It Works -->
          <div class="glass-card p-5 mt-5 fade-in">
            <h3 class="text-center mb-5"><i class="fas fa-cogs me-3"></i>How Our AI Detection Works</h3>
            <div class="row">
              <div class="col-md-4 mb-4">
                <div class="feature-item h-100">
                  <div class="feature-icon text-primary">
                    <i class="fas fa-brain"></i>
                  </div>
                  <h5>Neural Network Analysis</h5>
                  <p class="text-muted">Advanced AI models trained on millions of human and AI-generated samples with continuous learning capabilities.</p>
                </div>
              </div>
              <div class="col-md-4 mb-4">
                <div class="feature-item h-100">
                  <div class="feature-icon text-success">
                    <i class="fas fa-shield-alt"></i>
                  </div>
                  <h5>Pattern Recognition</h5>
                  <p class="text-muted">Detects subtle patterns in writing style, code structure, and visual artifacts that distinguish AI from human creation.</p>
                </div>
              </div>
              <div class="col-md-4 mb-4">
                <div class="feature-item h-100">
                  <div class="feature-icon text-warning">
                    <i class="fas fa-bolt"></i>
                  </div>
                  <h5>Real-time Analysis</h5>
                  <p class="text-muted">Instant results with detailed confidence scores and comprehensive feature breakdowns for complete transparency.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Page Navigation Logic
    document.addEventListener('DOMContentLoaded', function() {
      // Dashboard functionality
      class AdvancedDashboard {
          constructor() {
              this.threats = [];
              this.init();
              this.setupEventListeners();
              this.startRealTimeUpdates();
          }

          init() {
              this.initEnhancedCharts();
              this.initCombinedThreatMap();
              this.updateDashboardStats();
              this.loadThreatFeed();
          }

          initEnhancedCharts() {
              this.threatTrendChart = new ApexCharts(document.getElementById('threatTrendChart'), {
                  series: [
                      {
                          name: 'Phishing Attacks',
                          data: [30, 40, 35, 50, 49, 60, 70, 91, 125, 110, 95, 140]
                      },
                      {
                          name: 'Malware',
                          data: [20, 25, 30, 45, 35, 50, 40, 60, 75, 65, 80, 95]
                      },
                      {
                          name: 'Suspicious Activity',
                          data: [45, 35, 40, 55, 60, 75, 65, 80, 95, 85, 100, 120]
                      }
                  ],
                  chart: {
                      height: 350,
                      type: 'area',
                      zoom: { enabled: true },
                      foreColor: '#e4e4e4',
                      toolbar: { show: true },
                      dropShadow: { enabled: true, color: '#000', top: 18, left: 7, blur: 10, opacity: 0.2 }
                  },
                  colors: ['#ff4757', '#ffa502', '#2ed573'],
                  dataLabels: { enabled: false },
                  stroke: { curve: 'smooth', width: 3 },
                  title: {
                      text: 'Threat Detection Trends',
                      align: 'left',
                      style: { color: '#ffffff', fontSize: '16px', fontWeight: 'bold' }
                  },
                  grid: { borderColor: '#2a2a4a', strokeDashArray: 5 },
                  markers: { size: 5, colors: ['#ff4757', '#ffa502', '#2ed573'], strokeColors: '#fff', strokeWidth: 2 },
                  xaxis: {
                      categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                      labels: { style: { colors: '#8b8b9e' } },
                      axisBorder: { show: true, color: '#2a2a4a' }
                  },
                  yaxis: { labels: { style: { colors: '#8b8b9e' } } },
                  legend: {
                      position: 'top',
                      horizontalAlign: 'right',
                      labels: { colors: '#e4e4e4' }
                  },
                  tooltip: { theme: 'dark', x: { format: 'MMM' } }
              });
              this.threatTrendChart.render();

              this.predictiveChart = new ApexCharts(document.getElementById('predictiveChart'), {
                  series: [44, 55, 41, 17],
                  chart: { type: 'donut', height: 300, foreColor: '#e4e4e4' },
                  labels: ['Critical', 'High Risk', 'Medium Risk', 'Low Risk'],
                  colors: ['#ff4757', '#ffa502', '#2ed573', '#3742fa'],
                  legend: { position: 'bottom', labels: { colors: '#e4e4e4' } },
                  dataLabels: { enabled: true, style: { colors: ['#000'] }, dropShadow: { enabled: true } },
                  plotOptions: {
                      pie: {
                          donut: {
                              labels: {
                                  show: true,
                                  total: { show: true, label: 'Total Threats', color: '#e4e4e4' }
                              }
                          }
                      }
                  },
                  tooltip: { theme: 'dark' }
              });
              this.predictiveChart.render();
          }

          initCombinedThreatMap() {
              const globe = document.getElementById('combinedThreatMap');
              
              const threatData = [
                  // India threats (high density)
                  { top: '38%', left: '58%', intensity: 3 }, { top: '35%', left: '56%', intensity: 3 },
                  { top: '33%', left: '59%', intensity: 3 }, { top: '31%', left: '60%', intensity: 2 },
                  { top: '36%', left: '61%', intensity: 2 }, { top: '34%', left: '57%', intensity: 2 },
                  
                  // Asia threats
                  { top: '42%', left: '72%', intensity: 3 }, { top: '38%', left: '68%', intensity: 2 },
                  { top: '32%', left: '66%', intensity: 2 }, { top: '45%', left: '65%', intensity: 1 },
                  
                  // Global threats
                  { top: '30%', left: '48%', intensity: 2 }, { top: '33%', left: '50%', intensity: 1 },
                  { top: '35%', left: '25%', intensity: 3 }, { top: '38%', left: '18%', intensity: 2 },
                  { top: '50%', left: '50%', intensity: 1 }, { top: '60%', left: '55%', intensity: 1 },
              ];

              threatData.forEach((threat, index) => {
                  const pulse = document.createElement('div');
                  pulse.className = `combined-map-point heat-${threat.intensity}`;
                  pulse.style.top = threat.top;
                  pulse.style.left = threat.left;
                  pulse.style.animationDelay = `${index * 0.2}s`;
                  globe.appendChild(pulse);
              });
          }

          updateDashboardStats() {
              this.animateCounter('protectedCount', {{ history|length if history else 0 }});
              this.animateCounter('safeCount', {{ history|selectattr("1", "<", 30)|list|length if history else 0 }});
              this.animateCounter('suspiciousCount', {{ history|selectattr("1", ">=", 40)|selectattr("1", "<", 70)|list|length if history else 0 }});
              this.animateCounter('threatsBlocked', {{ history|selectattr("1", ">=", 70)|list|length if history else 0 }});
          }

          animateCounter(elementId, target) {
              const element = document.getElementById(elementId);
              let current = 0;
              const increment = target / 50;
              
              const updateCounter = () => {
                  current += increment;
                  if (current >= target) {
                      element.textContent = target.toLocaleString();
                      return;
                  }
                  element.textContent = Math.round(current).toLocaleString();
                  setTimeout(updateCounter, 20);
              };
              updateCounter();
          }

          loadThreatFeed() {
              const feed = document.getElementById('threatFeed');
              const sampleThreats = [
                  { type: 'phishing', message: 'New phishing campaign targeting financial institutions', severity: 'high', time: '2 minutes ago' },
                  { type: 'malware', message: 'Advanced malware variant with zero-day capabilities', severity: 'critical', time: '15 minutes ago' },
                  { type: 'suspicious', message: 'Unusual domain registration patterns detected', severity: 'medium', time: '1 hour ago' }
              ];

              sampleThreats.forEach(threat => {
                  const item = document.createElement('div');
                  item.className = `threat-item mb-3 p-3 rounded border-start border-5 ${threat.severity === 'critical' ? 'border-danger' : threat.severity === 'high' ? 'border-warning' : 'border-info'}`;
                  item.style.background = 'rgba(255,255,255,0.03)';
                  item.innerHTML = `
                      <div class="d-flex align-items-center mb-2">
                          <i class="fas ${threat.type === 'phishing' ? 'fa-fish' : threat.type === 'malware' ? 'fa-virus' : 'fa-exclamation-triangle'} me-2 ${threat.severity === 'critical' ? 'text-danger' : threat.severity === 'high' ? 'text-warning' : 'text-info'}"></i>
                          <strong class="text-uppercase">${threat.severity} Threat</strong>
                          <small class="text-muted ms-auto">${threat.time}</small>
                      </div>
                      <div class="threat-message">${threat.message}</div>
                  `;
                  feed.appendChild(item);
              });
          }

          setupEventListeners() {
              document.querySelectorAll('.quick-scan').forEach(btn => {
                  btn.addEventListener('click', (e) => {
                      document.querySelector('input[name="url"]').value = e.target.dataset.url;
                      document.getElementById('scanForm').submit();
                  });
              });

              document.querySelectorAll('.rescan-btn').forEach(btn => {
                  btn.addEventListener('click', (e) => {
                      document.querySelector('input[name="url"]').value = e.target.dataset.url;
                      document.getElementById('scanForm').submit();
                  });
              });
          }

          startRealTimeUpdates() {
              setInterval(() => {
                  this.updateLiveThreats();
              }, 10000);
          }

          updateLiveThreats() {
              document.getElementById('asiaThreats').textContent = Math.floor(1024 + Math.random() * 50).toLocaleString();
              document.getElementById('indiaThreats').textContent = Math.floor(347 + Math.random() * 30).toLocaleString();
          }
      }

      // AI Detector functionality
      class UltimateAIDetector {
          constructor() {
              this.analysisHistory = [];
              this.initEventListeners();
              this.initScrollAnimations();
          }

          initEventListeners() {
              const uploadZone = document.getElementById('uploadZone');
              const fileInput = document.getElementById('fileInput');

              // Click to upload
              uploadZone.addEventListener('click', () => fileInput.click());
              
              // File input change
              fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
              
              // Drag and drop
              uploadZone.addEventListener('dragover', (e) => {
                  e.preventDefault();
                  uploadZone.classList.add('dragover');
              });
              
              uploadZone.addEventListener('dragleave', () => {
                  uploadZone.classList.remove('dragover');
              });
              
              uploadZone.addEventListener('drop', (e) => {
                  e.preventDefault();
                  uploadZone.classList.remove('dragover');
                  this.handleFileDrop(e);
              });
          }

          initScrollAnimations() {
              const observer = new IntersectionObserver((entries) => {
                  entries.forEach(entry => {
                      if (entry.isIntersecting) {
                          entry.target.classList.add('visible');
                      }
                  });
              }, { threshold: 0.1 });

              document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
          }

          handleFileSelect(event) {
              const file = event.target.files[0];
              if (file) this.analyzeFile(file);
          }

          handleFileDrop(event) {
              const file = event.dataTransfer.files[0];
              if (file) this.analyzeFile(file);
          }

          analyzeFile(file) {
              this.showLoadingState(file);
              
              // Simulate AI analysis with realistic timing
              setTimeout(() => {
                  const results = this.generateAdvancedAnalysisResults(file);
                  this.displayResults(results);
                  this.analysisHistory.push(results);
              }, 2500);
          }

          generateAdvancedAnalysisResults(file) {
              const isAI = Math.random() > 0.4; // 60% chance of AI for demo
              const confidence = Math.floor(Math.random() * 25) + 75; // 75-100%
              
              return {
                  isAI: isAI,
                  confidence: confidence,
                  features: {
                      textPatterns: Math.floor(Math.random() * 35) + 65,
                      codeStructure: Math.floor(Math.random() * 40) + 60,
                      visualAnalysis: Math.floor(Math.random() * 30) + 70
                  },
                  advancedMetrics: {
                      perplexity: (Math.random() * 50 + 50).toFixed(1),
                      burstiness: (Math.random() * 40 + 60).toFixed(1),
                      coherence: (Math.random() * 35 + 65).toFixed(1),
                      pattern: (Math.random() * 45 + 55).toFixed(1),
                      originality: (Math.random() * 50 + 50).toFixed(1)
                  },
                  fileName: file.name,
                  fileSize: this.formatFileSize(file.size),
                  timestamp: new Date().toLocaleString()
              };
          }

          showLoadingState(file) {
              document.getElementById('resultContent').innerHTML = `
                  <div class="loading-dots mb-4">
                      <div></div><div></div><div></div><div></div>
                  </div>
                  <h5>Analyzing "${file.name}"</h5>
                  <p class="text-muted">Processing with advanced neural networks...</p>
                  <div class="progress mt-3" style="height: 6px; background: rgba(255,255,255,0.1);">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
                  </div>
              `;
          }

          displayResults(results) {
              document.getElementById('resultContent').style.display = 'none';
              document.getElementById('analysisResults').style.display = 'block';
              document.getElementById('advancedAnalysis').style.display = 'block';
              
              // Update main result
              const indicator = document.getElementById('resultIndicator');
              indicator.className = `detection-indicator ${results.isAI ? 'ai-detected' : 'human-detected'}`;
              indicator.innerHTML = `<i class="fas ${results.isAI ? 'fa-robot' : 'fa-user'} me-3"></i>${results.isAI ? 'AI Generated' : 'Human Created'}`;
              
              // Animate confidence meter
              this.animateConfidence(results.confidence);
              
              // Update file info
              document.getElementById('fileName').textContent = results.fileName;
              document.getElementById('fileSize').textContent = results.fileSize;
              
              // Update feature scores
              document.getElementById('textScore').textContent = `${results.features.textPatterns}% AI likelihood`;
              document.getElementById('codeScore').textContent = `${results.features.codeStructure}% AI patterns`;
              document.getElementById('imageScore').textContent = `${results.features.visualAnalysis}% AI indicators`;
              
              // Update advanced metrics
              document.getElementById('perplexityScore').textContent = `${results.advancedMetrics.perplexity}%`;
              document.getElementById('burstinessScore').textContent = `${results.advancedMetrics.burstiness}%`;
              document.getElementById('coherenceScore').textContent = `${results.advancedMetrics.coherence}%`;
              document.getElementById('patternScore').textContent = `${results.advancedMetrics.pattern}%`;
              document.getElementById('originalityScore').textContent = `${results.advancedMetrics.originality}%`;
          }

          animateConfidence(confidence) {
              const fill = document.getElementById('confidenceFill');
              const value = document.getElementById('confidenceValue');
              
              let current = 0;
              const interval = setInterval(() => {
                  if (current >= confidence) {
                      clearInterval(interval);
                      return;
                  }
                  current++;
                  fill.style.width = current + '%';
                  value.textContent = current + '%';
                  
                  // Dynamic color based on confidence
                  if (current > 80) {
                      fill.style.background = 'var(--ai-gradient)';
                  } else if (current > 60) {
                      fill.style.background = 'var(--warning-gradient)';
                  } else {
                      fill.style.background = 'var(--human-gradient)';
                  }
              }, 20);
          }

          formatFileSize(bytes) {
              if (bytes === 0) return '0 Bytes';
              const k = 1024;
              const sizes = ['Bytes', 'KB', 'MB', 'GB'];
              const i = Math.floor(Math.log(bytes) / Math.log(k));
              return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
          }
      }

      // Initialize dashboard by default
      const dashboard = new AdvancedDashboard();

      // Navigation between dashboard and AI detector
      document.getElementById('ai-human-detector-link').addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('dashboard-content').style.display = 'none';
          document.getElementById('ai-detector-content').style.display = 'block';
          document.getElementById('main-body').className = 'ai-detector-body';
          
          // Initialize AI detector when page is shown
          new UltimateAIDetector();
      });

      document.getElementById('back-to-dashboard').addEventListener('click', function(e) {
          e.preventDefault();
          showDashboard();
      });

      document.getElementById('back-to-dashboard-btn').addEventListener('click', function(e) {
          e.preventDefault();
          showDashboard();
      });

      function showDashboard() {
          document.getElementById('ai-detector-content').style.display = 'none';
          document.getElementById('dashboard-content').style.display = 'block';
          document.getElementById('main-body').className = 'dashboard-body';
      }
    });
  </script>
</body>
</html>